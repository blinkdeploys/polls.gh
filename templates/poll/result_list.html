{% extends 'base.html' %}
{% block title %}{{ title }}{% endblock %}

{% if user.is_authenticated %}

{% block content %}


<h2 class="mt-4 mb-4">{{ title }}</h2>
<div class="mt-3 mb-2">
    {% if positions is not None %}
        <div style="display:inline;"><a href="/poll/result/stations/">Polling Stations</a></div>
        {% if candidates is not None %}
            <div style="display:inline;">/ <a href="#">Positions</a></div>
        {% endif %}
    {% endif %}
</div>
<div class="row">
        <table class="table">
            <!--stations-->
            <tr>
                <td>
                    <div style="font-weight: bold;">Polling Stations</div>
                </td>
                <td colspan="2">
                    {% include 'layout/search.html' %}
                </td>
            </tr>

            {% for station in stations %}
                <tr>
                    <td>
                        <div class="row">
                            <div class="col">
                                {{ station.code }}
                            </div>
                            <div class="col-9">
                                <a href="/poll/result/station/{{ station.pk }}">{{ station.title }}</a>
                            </div>
                        </div>
                    </td>
                    <td colspan="2">
                        <div align="right">0</div>
                    </td>
                </tr>

                <!--positions-->
                {% if positions is not None %}
                <tr>
                    <td>
                        <div style="font-weight: bold;">Positions</div>
                    </td>
                    <td></td>
                    <td></td>
                </tr>
                {% for position in positions %}
                <tr>
                    <td><a href="/poll/result/station/{{ station.pk }}/position/{{ position.pk }}">{{ position.title }}</a></td>
                    <td>{{ position.candidates }}</td>
                    <td>{{ position.votes }}</td>
                </tr>

                <!--results-->
                {% if results is not None %}
                <tr>
                    <td>
                        <div style="font-weight: bold;">Results</div>
                    </td>
                    <td></td>
                    <td></td>
                </tr>
                {% for result in results %}
                <tr>
                    <td colspan="3">
                        <div style="font-weight: bold;">Results</div>
                    </td>
                </tr>
                {% endfor %}
                {% endif %}
                <!--results-->

                <!--candidates-->
                {% if candidates is not None %}
                <form method="post" action="/poll/result/station/17330/position/288">
                    {% csrf_token %}
                    <input name="station" value="{{ station.pk }}" class="form-control" type="hidden" placeholder="enter count for candidate" />
                    <tr>
                        <td>
                            <div style="font-weight: bold;">Candidates</div>
                        </td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td colspan="3">
                            <div class="row" style="font-weight: bold;">
                                <div class="col-2">Party</div>
                                <div class="col-4">Candidate Name</div>
                                <div class="col-1" align="center">Votes</div>
                            </div>
                        </td>
                    </tr>
                    {% for candidate in candidates %}
                    <tr>
                        <td colspan="3">
                            <div class="row">
                                <div class="col-2">
                                    {{ candidate.party.code }}
                                </div>
                                <div class="col-4">
                                    {{ candidate.full_name }}
                                    <!--a href="/poll/result/station/{{ station.pk }}/position/{{ position.pk }}/candidate/{{ candidate.pk }}">
                                    </a-->
                                </div>
                                <div class="col-2">
                                    <input name="candidate" value="{{ candidate.pk }}" class="form-control" type="hidden" placeholder="enter count for candidate" />
                                    {% if candidate.station_results %}
                                        {% for result in candidate.station_results|slice:":1" %}
                                        <input name="total_votes" value="{{ result.total_votes }}" class="form-control" type="number" placeholder="enter count for candidate" />
                                        {% endfor %}
                                    {% else %}
                                        <input name="total_votes" value="" class="form-control" type="number" placeholder="enter count for candidate" />
                                    {% endif %}
                                </div>
                                <div class="col-1">
                                </div>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                    <tr style="font-weight: bold;">
                        <td colspan="3">
                            <div class="row">
                                <div class="col-2">
                                    A
                                </div>
                                <div class="col-4">
                                    Total Valid Votes
                                </div>
                                <div class="col-6">
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr style="font-weight: bold;">
                        <td colspan="3">
                            <div class="row">
                                <div class="col-2">
                                    B
                                </div>
                                <div class="col-4">
                                    Total Rejected Votes
                                </div>
                                <div class="col-6">
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr style="font-weight: bold;">
                        <td colspan="3">
                            <div class="row">
                                <div class="col-2">
                                    C
                                </div>
                                <div class="col-4">
                                    Total Votes in Ballot Box
                                </div>
                                <div class="col-6">
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3">
                            <div align="right">
                                <button class="btn btn-dark">Save Collation</button>
                                <button class="btn btn-light">Cancel</button>
                            </div>
                        </td>
                    </tr>
                </form>
                {% endif %}
                <!--candidates-->
                {% endfor %}
                {% endif %}
                <!--positions-->
            {% endfor %}

            {% if positions is None %}
            <tr>
                <td colspan="3">
                    <div class="form-actions mb-6">
                        <a href="{{ station_prev_link }}" class="btn btn-light">Previous</a>
                        <a href="{{ station_next_link }}" class="btn btn-light">Next</a>
                    </div>
                
                    <div class="form-actions mb-6 mt-6">
                        <br /><br /><br /><br />
                    </div>
                </td>
            </tr>
            {% endif %}
        
            <!--stations-->
        </table>
</div>


<!--{-% include 'layout/table.html' with title=title row_link="poll/result/" next_link=next_link prev_link=prev_link delete_link='#' columns=columns highlight_column='candidate_details' data=data user=user only%-}-->

{% endblock %}

{% endif %}
